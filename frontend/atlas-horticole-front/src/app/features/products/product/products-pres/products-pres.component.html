<div class="catalog-page">
  <!-- Hero Section -->
  <section class="catalog-hero">
    <h1 class="catalog-hero__title">Products</h1>
  </section>

  <!-- Filters & Products -->
  <section class="catalog-content">
    <div class="catalog-content__container">
      <!-- Filters Sidebar -->
      <aside class="catalog-filters">
        <div class="catalog-filters__wrapper">
          <!-- Search -->
          <div class="filter-group">
            <label class="filter-group__label">Rechercher</label>
            <div class="search-input">
              <svg
                class="search-input__icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
              <input
                type="search"
                class="search-input__field"
                placeholder="Nom du produit..."
                [value]="searchQuery"
                (input)="onSearchChange($any($event.target).value)"
              />
            </div>
          </div>

          <!-- Categories -->
          <div class="filter-group">
            <label class="filter-group__label">Catégories</label>
            <div class="category-list">
              <button
                *ngFor="let category of categories"
                class="category-item"
                [class.category-item--active]="selectedCategory === category"
                (click)="onCategoryChange(category)"
              >
                {{ category }}
                <span class="category-item__count" *ngIf="category !== 'Tous'">
                  ({{ (products | filter : category : "category").length }})
                </span>
              </button>
            </div>
          </div>

          <!-- Stock Filter -->
          <div class="filter-group">
            <label class="filter-checkbox">
              <input
                type="checkbox"
                [checked]="inStockOnly"
                (change)="onStockFilterChange($any($event.target).checked)"
              />
              <span class="filter-checkbox__label">En stock uniquement</span>
            </label>
          </div>
        </div>
      </aside>

      <!-- Products Grid -->
      <div class="catalog-products">
        <!-- Results Info -->
        <div class="catalog-products__header">
          <p class="catalog-products__count">
            <strong>{{ filteredProducts.length }}</strong> produit(s) trouvé(s)
          </p>
        </div>

        <!-- No Results -->
        <div *ngIf="filteredProducts.length === 0" class="no-results">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <h3>Aucun produit trouvé</h3>
          <p>Essayez de modifier vos filtres de recherche</p>
        </div>

        <!-- Products Grid -->
        <div class="products-grid">
          <article
            *ngFor="let product of filteredProducts"
            class="product-card"
          >
            <div class="product-card__badge" *ngIf="product.featured">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                ></path>
              </svg>
              Vedette
            </div>

            <div class="product-card__image">
              <div class="product-card__image-placeholder"></div>
              <div
                class="product-card__stock-badge"
                [class.product-card__stock-badge--out]="!product.inStock"
              >
                {{ product.inStock ? "En stock" : "Rupture" }}
              </div>
            </div>

            <div class="product-card__content">
              <span class="product-card__category">{{ product.category }}</span>
              <h3 class="product-card__name">{{ product.name }}</h3>
              <p class="product-card__description">{{ product.description }}</p>

              <div class="product-card__details" *ngIf="product.composition">
                <strong>Composition:</strong> {{ product.composition }}
              </div>

              <div class="product-card__details" *ngIf="product.dosage">
                <strong>Dosage:</strong> {{ product.dosage }}
              </div>

              <div class="product-card__actions">
                <button
                  class="product-card__button product-card__button--primary"
                  (click)="onProductDetails(product.id)"
                >
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                  </svg>
                  Plus d'infos
                </button>
                <button
                  class="product-card__button product-card__button--secondary"
                  [disabled]="!product.inStock"
                >
                  Demander un devis
                </button>
              </div>
            </div>
          </article>
        </div>
      </div>
    </div>
  </section>
</div>
